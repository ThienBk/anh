<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cờ Caro Online</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="game">
    <div id="board">
      <div class="cell" onclick="clickCell(this)">X</div>
      <div class="cell" onclick="clickCell(this)">O</div>
      <div class="cell" onclick="clickCell(this)">X</div>
      <div class="cell" onclick="clickCell(this)">O</div>
      <div class="cell" onclick="clickCell(this)">X</div>
      <div class="cell" onclick="clickCell(this)">O</div>
      <div class="cell" onclick="clickCell(this)">X</div>
      <div class="cell" onclick="clickCell(this)">O</div>
    </div>
    <div id="info">
      <p>Người chơi 1: X</p>
      <p>Người chơi 2: O</p>
      <p>Người chơi hiện tại: X</p>
    </div>
    <div id="controls">
      <button id="new-game">Mới</button>
      <button id="two-players">Hai người</button>
      <button id="one-player">Một người</button>
      <button id="reset">Reset</button>
    </div>
  </div>
  <script>
    let board = [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
    ];

    let currentPlayer = "X";

    let winner = null;

    function init() {
      for (let i = 0; i < board.length; i++) {
        for (let j = 0; j < board[i].length; j++) {
          board[i][j] = "";
        }
      }
    }

    function updateInfo() {
      document.getElementById("info").querySelector("p:nth-child(1)").innerHTML = "Người chơi 1: " + currentPlayer;
      document.getElementById("info").querySelector("p:nth-child(2)").innerHTML = "Người chơi 2: " + (currentPlayer === "X" ? "O" : "X");
      document.getElementById("info").querySelector("p:nth-child(3)").innerHTML = "Người chơi hiện tại: " + currentPlayer;
    }

    function checkWinner() {
      for (let i = 0; i < board.length; i++) {
        if (board[i][0] === board[i][1] === board[i][2] !== "" && board[i][0] !== "") {
          winner = board[i][0];
          return true;
        }
        if (board[0][i] === board[1][i] === board[2][i] !== "" && board[0][i] !== "") {
          winner = board[0][i];
          return true;
        }
      }
      if (board[0][0] === board[1][1] === board[2][2] !== "" && board[0][0] !== "") {
        winner = board[0][0];
        return true;
      }
      if (board[0][2] === board[1][1] === board[2][0] !== "" && board[0][2] !== "") {
        winner = board[0][2];
        return true;
      }
      return false;
    }

    function clickCell(cell) {
      if (cell.textContent === "") {
        cell.textContent = currentPlayer;
        currentPlayer = currentPlayer === "X" ? "O" : "X";
        updateInfo();
        if (checkWinner()) {
          alert("Người chơi " + winner + " đã thắng!");
          init();
        }
      }
    }

    init();
  </script>
</body>
</html>
